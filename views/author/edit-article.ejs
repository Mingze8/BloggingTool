<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Author Article Edit Page</title>
    <!-- Include CSS -->
    <link rel="stylesheet" type="text/css" href="/css/bootstrap.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" type="text/css" href="/main.css">
</head>
<body>
    <div class="main-wrapper d-flex flex-nowrap">
        <% if (message.error) { %>
            <div class="alert alert-warning fade d-flex align-items-center show custom-author" role="alert">
                <i class="fa fa-exclamation me-2" aria-hidden="true"></i>
                <p><%= message.error[0].msg %></p>
            </div>
        <% } %>
        <div class="flex flex-column flex-shrink-0 sidebar pt-5">
            <div class="nav-title"><i class="fa fa-smile-o fa-lg me-2"></i>Edit Article Page</div>
            <ul class="list-unstyled pt-4">
                <li><a href="/author/"><p>Go Back<i class="fa fa-chevron-right"></i></p></a></li>
            </ul>
        </div>
        <div class="content pt-5 w-100">
            <div class="container">
                <div class="row">
                    <div class="col-12">
                        <div class="page-top d-flex align-items-end justify-content-between pb-4">
                            <div>
                                <h1><%= mode === 'edit' ? 'Edit Article' : 'Create New Article'%></h1>
                            </div>
                        </div>

                        <div class="form-column d-flex mt-5 pe-5">
                            <div class="w-25 me-5 p-3 border border-secondary rounded-3 bg-white d-grid" style="--bs-border-opacity: .2; place-content: center;">
                                <h6 class="mb-3"><b>Article ID:</b>
                                    <span class="d-block mt-2"><%= mode === 'edit' ? output.ArticleID : 'N/A' %></span>
                                </h6>
                                <h6 class="mb-3"><b>Created Date: </b>
                                    <span class="d-block mt-2"><%= mode === 'edit' ? output.created_time : 'N/A' %></span>
                                </h6>
                        
                                <h6><b>Last Modified: </b>
                                    <span class="d-block mt-2"><%= mode === 'edit' ? output.last_modified : 'N/A' %></span>
                                </h6>
                            </div>

                                    
                            <div class="w-100">
                                <% if (mode === 'edit') { %>
                                <form action="/author/edited-article?id=<%= article_id %>" method="POST">
                                <% } else if (mode === 'new') { %>
                                <form action="/author/created-article" method="POST">
                                <% } %>
                                    <div class="frow mt-0">
                                        <label for="title">Title</label>
                                        <input type="text" placeholder="Please enter article title" name="title" id="title" value="<%= mode === 'edit' ? output.title : '' %>" required>
                                    </div>
                                    <div class="frow">
                                        <label for="content">Content</label>
                                        <textarea name="content" id="content" required><%= mode === 'edit' ? output.content : '' %></textarea>
                                    </div>
                                    <button class="submitBtn" type="submit">Submit</button>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // show the alert for 2 second
            setTimeout(function() {
                var alerts = document.querySelectorAll('.alert');
                alerts.forEach(function(alert) {
                    var alertInstance = new bootstrap.Alert(alert);
                    alertInstance.close();
                });
            }, 3000);
        });
    </script>
    <!-- Include Bootstrap JS and its dependencies -->
    <script src="/js/bootstrap.js"></script>
</body>
</html>